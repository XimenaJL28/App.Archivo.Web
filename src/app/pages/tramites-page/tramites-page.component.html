<div class="flex justify-content-center">
  <h3 class="mb-0 mt-0">Listado de Trámites</h3>
</div>

<p-divider></p-divider>

<div class="card flex justify-content-center">
  <p-dropdown [options]="tramites" [(ngModel)]="tramite" optionLabel="nombre"
    (ngModelChange)="getSubtramites(tramite.idTramite)">
  </p-dropdown>
</div>

<!-- Tabla de tramites realizados  -->
<div *ngIf="tramiteSubTipos.length > 0">
  <p class="mb-0">Grupo de Documentos</p>
  <div class="grid mt-2">
    <div class="col-12">
      <p-accordion>
        <p-accordionTab *ngFor="let tramiteSubTipoItem of tramiteSubTipos; index as i">
          <ng-template pTemplate="header">
            <div class="flex align-items-center">
              <span class="vertical-align-middle">{{ tramiteSubTipoItem.nombreSubtramite | titlecase }}</span>
            </div>
          </ng-template>
          <ng-template pTemplate="content">
            <div *ngIf="tramiteSubTipoItem.documentoPlantillas.length > 0">
              <p-table [value]="tramiteSubTipoItem.documentoPlantillas" responsiveLayout="scroll"
                [tableStyle]="{ 'min-width': '50rem', 'width': '100%' }"
                styleClass="p-datatable p-component p-datatable-sm">
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th>Nombre</th>
                    <th>Cantidad Mínima</th>
                    <th>Plazo Máximo</th>
                    <th>Obligatorio</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-documentoPlantillaIndex let-columns="columns">
                  <tr>
                    <td>{{ documentoPlantillaIndex.nombreDocumento | titlecase }}</td>
                    <td>{{ documentoPlantillaIndex.cantidadMinima }}</td>
                    <td>{{ documentoPlantillaIndex.plazoMaximo }}</td>
                    <td>{{ documentoPlantillaIndex.obligatorio }}</td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </ng-template>
        </p-accordionTab>
      </p-accordion>
    </div>
  </div>
</div>

<!-- botonque abre la configuracion del modal -->
<p-dialog header="Plantilla" [(visible)]="showplantilla" [style]="{width: '90vw', height :'100vh'}">
  <app-dialog-plantilla [canEdit]="canEditPlantilla" (cerrarDialogModal)="cerrarPlantillaDialogModal()">
  </app-dialog-plantilla>
</p-dialog>

<p-dialog header="Documento tipo" [(visible)]="showDocumentoTipo" [style]="{width: '90vw', height :'100vh'}">
  <app-documentotipo-form (cerrarDialogModal)="cerrarDocumentoTipoDialogModal()">
  </app-documentotipo-form>
</p-dialog>

<button (click)="showDialogPlantilla()" [disabled]="!canViewPlantilla" pButton pRipple type="button"
  [icon]="'pi pi-plus'" class="p-button-rounded btn-float p-button-primary btn-save" title="Agregar Plantilla"
  *ngIf="permisoTipo(41007,51205)"></button>

<!-- <button (click)="showDialogDocumentoTipo()" pButton pRipple type="button" [icon]="'pi pi-plus'"
  class="p-button-rounded btn-float p-button-primary btn-agregar " title="Agregar Documento Tipo"></button> -->

<div *ngIf="tramiteSubTipos.length == 0" style="text-align: center;">
  <p>Grupo de documentos inexistente</p>
</div>